<!doctype html>
<html lang="pt-BR" class="page-transition">
<head>
Â  <link rel="icon" href="favicon.ico" type="image/x-icon">
Â  <meta charset="utf-8" />
Â  <meta name="viewport" content="width=device-width,initial-scale=1" />
Â  <title>ConfirmaÃ§Ã£o de Pedido - DelÃ­cias Tropicana</title>
Â Â 
Â  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
Â  <link rel="stylesheet" href="style.css?v=14">Â 
Â Â 
Â  <style>
Â  Â  /* 1. TransiÃ§Ã£o de Entrada da PÃ¡gina */
Â  Â  .fade-page {
Â  Â  Â  Â  opacity: 0;
Â  Â  Â  Â  transition: opacity 0.3s ease-in;
Â  Â  }
Â  Â  .fade-page.loaded {
Â  Â  Â  Â  opacity: 1;
Â  Â  }
Â  Â Â 
Â  Â  /* 2. TransiÃ§Ã£o de SaÃ­da (Ao clicar para mudar de pÃ¡gina) */
Â  Â  .page-transition.fade-out .fade-page {
Â  Â  Â  Â  opacity: 0;
Â  Â  Â  Â  transition: opacity 0.3s ease-out;
Â  Â  }
Â  Â  /* 3. Evita que o scroll apareÃ§a durante a transiÃ§Ã£o */
Â  Â  .page-transition.fade-out {
Â  Â  Â  Â  overflow: hidden;Â 
Â  Â  }

Â  Â  /* âœ… NOVO: Estilos para o Resumo do Pedido */
Â  Â  .resumo-content {
Â  Â  Â  Â  /* Define um espaÃ§amento controlado entre os itens do pedido */
Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  flex-direction: column;
Â  Â  Â  Â  gap: 15px; /* EspaÃ§amento entre os itens */
Â  Â  Â  Â  padding: 15px 0;
Â  Â  }
Â  Â  .resumo-item {
Â  Â  Â  Â  font-size: 0.95rem;
Â  Â  Â  Â  line-height: 1.4;
Â  Â  Â  Â  padding-bottom: 10px;
Â  Â  Â  Â  border-bottom: 1px dotted #ccc; /* Linha de separaÃ§Ã£o entre itens */
Â  Â  }
Â  Â  .resumo-item:last-child {
Â  Â  Â  Â  border-bottom: none;
Â  Â  Â  Â  padding-bottom: 0;
Â  Â  }
Â  Â  .separator {
Â  Â  Â  Â  color: #999;
Â  Â  Â  Â  margin: 0 5px;
Â  Â  }
Â  Â  .detail-label {
Â  Â  Â  Â  font-weight: 600;
Â  Â  }
Â  Â  .item-price {
Â  Â  Â  Â  /* Usa a cor de alerta para destacar o preÃ§o (assumindo que 'style.css' define --color-alert) */
Â  Â  Â  Â  color: var(--color-alert, #e53935);Â 
Â  Â  Â  Â  font-size: 1rem;
Â  Â  }

    /* =======================================
     * NOVO: ESTILOS DO CARTÃƒO FIDELIDADE
     * ======================================= */
    .fidelidade-card {
        background: #FFEB3B; /* Amarelo da logo (cor de destaque) */
        padding: 20px;
        border-radius: 12px;
        margin: 25px 0; /* EspaÃ§o antes e depois do cartÃ£o */
        border: 2px solid #FFD740;
        text-align: center;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    .fidelidade-card h3 {
        margin-top: 0;
        color: #222;
        font-size: 1.3rem;
    }
    .selos-container {
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        gap: 8px;
        margin: 15px 0 20px;
    }
    .selo {
        width: 35px;
        height: 35px;
        border-radius: 50%;
        background-color: #eee;
        border: 2px solid #ccc;
        line-height: 31px;
        font-weight: 700;
        color: #ccc;
        font-size: 0.9em;
        transition: all 0.2s ease;
    }
    .selo.earned {
        background-color: #4CAF50; /* Verde de sucesso */
        border-color: #388e3c;
        color: white;
    }
    #btnResgate.btn-whatsapp {
        background-color: #4CAF50;
        color: white;
        font-weight: bold;
        transition: background-color 0.3s;
    }
    #btnResgate:disabled {
        background-color: #ccc;
        color: #666;
        cursor: not-allowed;
    }
</style>
Â Â 
</head>
<body class="fade-page">
Â  <main class="container">
Â  Â  <section class="menu">
Â  Â  Â  <h2>âœ… Quase lÃ¡! Confira seu Pedido:</h2>

Â  Â  Â  <div class="resumo-box section-card" id="resumoFinalContainer">
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  <h3 class="section-title">Seu Nome</h3>
Â  Â  Â  Â  <div class="campo">
Â  Â  Â  Â  Â  Â  Â  <input type="text" id="nameInputFinal" placeholder="Ex.: Claudiane" required>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <hr style="margin: 20px 0; border: 0; border-top: 1px dashed #eee;">
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  <h3 class="section-title">Resumo do Pedido</h3>
Â  Â  Â  Â  Â  <div id="resumoPedido" class="resumo-content"></div>

            <div id="fidelidadeCard" class="fidelidade-card">
                <h3>CartÃ£o Fidelidade ğŸ</h3>
                <p id="selosStatus">VocÃª tem <strong>0</strong> selos de 10.</p>
                <div id="selosContainer" class="selos-container">
                    </div>
                <button id="btnResgate" class="btn" disabled>
                    Complete 10 selos para ganhar uma Salada GRÃTIS!
                </button>
            </div>
            Â  Â  Â  Â  Â  <div class="confirmation-actions">Â 
Â  Â  Â  Â  Â  Â  Â  <div class="resumo-total-final resumo-total centralizado" id="totalAPagar"></div>

Â  Â  Â  Â  Â  Â  Â  <button id="enviarPedido" class="btn btn-whatsapp">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Enviar Pedido via WhatsApp
Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  <button id="voltarMenu" class="btn btn-voltar">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Voltar e Adicionar Mais Saladas
Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  </div>

Â  Â  Â  </div>
Â  Â  </section>
Â  </main>

Â  <script>
Â  Â  // A funÃ§Ã£o handlePageTransition deve ser exposta globalmente em app.js
Â  Â  // Se nÃ£o estiver, esta linha pode falhar, mas deve funcionar se o app.js estiver carregado primeiro
Â  Â  if(typeof handlePageTransition !== 'function') {
Â  Â  Â  Â  window.handlePageTransition = function(url) {
Â  Â  Â  Â  Â  Â  document.documentElement.classList.add('fade-out');
Â  Â  Â  Â  Â  Â  setTimeout(() => { window.location.href = url; }, 300);
Â  Â  Â  Â  };
Â  Â  }

Â  Â  // VariÃ¡vel global para o telefone
Â  Â  const phone = '5565993321761';Â 

Â  Â  const formatCurrency = (value) => {
Â  Â  Â  Â  return new Intl.NumberFormat('pt-BR', {
Â  Â  Â  Â  Â  Â  style: 'currency',
Â  Â  Â  Â  Â  Â  currency: 'BRL'
Â  Â  Â  Â  }).format(value);
Â  Â  };

Â  Â  function calcularTotalGeral() {
Â  Â  Â  Â  const pedidosJSON = localStorage.getItem('tropicanaPedidos');
Â  Â  Â  Â  const pedidos = pedidosJSON ? JSON.parse(pedidosJSON) : [];
Â  Â  Â  Â  let totalPedido = 0;
Â  Â  Â  Â  pedidos.forEach(item => {
Â  Â  Â  Â  Â  Â  totalPedido += item.total;
Â  Â  Â  Â  });
Â  Â  Â  Â  return totalPedido;
Â  Â  }

    // ======================================================
    // NOVO: FUNÃ‡Ã•ES DE FIDELIDADE (DEVE ESTAR EM app.js OU GLOBALMENTE)
    // ======================================================
    const MAX_SEALS = 10;

    function getFidelidadeSelos() {
        const selos = localStorage.getItem('fidelidade_selos');
        return parseInt(selos) || 0;
    }
    
    function addFidelidadeSelo() {
        let selos = getFidelidadeSelos();
        if (selos < MAX_SEALS) {
            selos++;
            localStorage.setItem('fidelidade_selos', selos);
            console.log(`[FIDELIDADE] Selo adicionado! Total: ${selos}/${MAX_SEALS}`);
        }
    }

    function resetFidelidadeSelos() {
        localStorage.setItem('fidelidade_selos', 0);
        console.log('[FIDELIDADE] Selos zerados apÃ³s resgate.');
    }

// ======================================================
// FUNÃ‡ÃƒO PARA GERAR O TEXTO DO WHATSAPP (CORRIGIDA)
// ======================================================
const getWhatsappText = (total) => {
Â  Â  // Recupera os pedidos do localStorage
Â  Â  const pedidos = JSON.parse(localStorage.getItem('tropicanaPedidos')) || [];
Â  Â  const name = localStorage.getItem('tropicanaName') || 'Cliente';

Â  Â  // 1. InÃ­cio da Mensagem (NOVO FORMATO LIMPO COM NEGRITO NO TÃTULO E NOME)
Â  Â  let text = `*NOVO PEDIDO - DELÃCIAS TROPICANA*\n\n`; // Dupla quebra para separar o tÃ­tulo da mensagem
Â  Â  text += `Meu nome Ã© *${name.trim()}* e este Ã© o meu pedido:\n\n`; // Dupla quebra para separar a introduÃ§Ã£o do primeiro item
Â  Â Â 
Â  Â  // 2. Loop pelos itens do pedido
Â  Â  pedidos.forEach((item, index) => {
Â  Â  Â  Â  const precoUnitario = item.tamanho.preco;

Â  Â  Â  Â  // TÃ­tulo do Item - AGORA COM APENAS UMA QUEBRA DE LINHA NO FINAL
Â  Â  Â  Â  text += `ITEM ${index + 1}\n`;Â 
Â  Â  Â  Â Â 
Â  Â  Â  Â  // Tamanho e PreÃ§o
Â  Â  Â  Â  text += `Tamanho: ${item.tamanho.nome} â€” ${formatCurrency(precoUnitario)}\n`;
Â  Â  Â  Â Â 
Â  Â  Â  Â  // Categoria 1: Frutas (GrÃ¡tis)
Â  Â  Â  Â  if (item.fruits && item.fruits.length > 0) {
Â  Â  Â  Â  Â  Â  // Usa dupla quebra para separar o item.tamanho da categoria
Â  Â  Â  Â  Â  Â  text += `\n*Frutas (GrÃ¡tis):*\n`;Â 
Â  Â  Â  Â  Â  Â  item.fruits.forEach(fruta => {
Â  Â  Â  Â  Â  Â  Â  Â  text += `â€¢ ${fruta.nome}\n`;
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }

Â  Â  Â  Â  // Categoria 2: Adicionais de Frutas (Extras Pagos)
Â  Â  Â  Â  if (item.extras && item.extras.length > 0) {
Â  Â  Â  Â  Â  Â  text += `\n*Adicionais de Fruta (R$2,00 cada):*\n`;Â 
Â  Â  Â  Â  Â  Â  item.extras.forEach(extra => {
Â  Â  Â  Â  Â  Â  Â  Â  text += `â€¢ ${extra.nome}\n`;
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }

Â  Â  Â  Â  // Categoria 3: Acompanhamentos (GrÃ¡tis)
Â  Â  Â  Â  if (item.acomp && item.acomp.length > 0) {
Â  Â  Â  Â  Â  Â  text += `\n*Acompanhamentos (GrÃ¡tis):*\n`;Â 
Â  Â  Â  Â  Â  Â  item.acomp.forEach(acomp => {
Â  Â  Â  Â  Â  Â  Â  Â  // NOTA: Os seus acompanhamentos estavam usando '*' em vez de 'â€¢'. Mantenho o '*' se for sua preferÃªncia.
Â  Â  Â  Â  Â  Â  Â  Â  text += `* ${acomp.nome}\n`;Â 
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  // ObservaÃ§Ã£o (Se existir) - âœ… CORRIGIDO: Checa por 'observacoes' e 'obs'
Â  Â  Â  Â  const obs = item.observacoes || item.obs;
Â  Â  Â  Â  if (obs && obs.trim() !== '') {
Â  Â  Â  Â  Â  Â  const obsLimpa = obs.trim().replace(/\n/g, ' ');Â 
Â  Â  Â  Â  Â  Â  // Agora o tÃ­tulo "ObservaÃ§Ã£o" aparece em negrito no WhatsApp
Â  Â  Â  Â  Â  Â  text += `\n*ObservaÃ§Ãµes*: ${obsLimpa}\n`;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  // Subtotal do Item - REMOVIDO ESPAÃ‡O EXTRA ANTES, DEIXANDO APENAS UM NOVO PARÃGRAFO DE ESPAÃ‡AMENTO
Â  Â  Â  Â  text += `\n*Subtotal: ${formatCurrency(item.total)}*\n`;Â 
Â  Â  Â  Â Â 
Â  Â  Â  Â  // Linha de separaÃ§Ã£o entre itens
Â  Â  Â  Â  text += `---------------------------------\n`;Â 
Â  Â  });

Â  Â  // 3. RodapÃ©
Â  Â  // Dupla quebra de linha para separar o rodapÃ© do Ãºltimo item.
Â  Â  text += `\n\nAguardando a confirmaÃ§Ã£o do pedido e o cÃ¡lculo da taxa de entrega.\n\n`;Â 
Â  Â  text += `*Obrigado!*`;Â 

Â  Â  // Adiciona o valor total no final da mensagem do WhatsApp
Â  Â  text += `\n\n*Valor Total R$ ${total.toFixed(2).replace('.', ',')}*`;

Â  Â  // 4. Retorna a mensagem formatada
Â  Â  return text;
};

// ======================================================
// FUNÃ‡ÃƒO loadAndDisplayOrder (AGORA INCLUI O FIDELIDADE)
// ======================================================
Â  Â  function loadAndDisplayOrder() {
Â  Â  Â  Â Â 
Â  Â  Â  Â  // 1. RECUPERAÃ‡ÃƒO DE DADOS
Â  Â  Â  Â  const pedidosJSON = localStorage.getItem('tropicanaPedidos');
Â  Â  Â  Â  const pedidos = pedidosJSON ? JSON.parse(pedidosJSON) : [];

Â  Â  Â  Â  // 2. REFERÃŠNCIAS DO DOM
Â  Â  Â  Â  const resumoPedidoDiv = document.getElementById('resumoPedido');
Â  Â  Â  Â  const totalAPagarDiv = document.getElementById('totalAPagar');
Â  Â  Â  Â  const nameInput = document.getElementById('nameInputFinal');
Â  Â  Â  Â Â 
Â  Â  Â  Â  // 3. RECUPERAÃ‡ÃƒO DE DADOS (Nome)
Â  Â  Â  Â  nameInput.value = localStorage.getItem('tropicanaName') || '';
Â  Â  Â  Â Â 
Â  Â  Â  Â  // 4. CÃLCULO E EXIBIÃ‡ÃƒO
Â  Â  Â  Â  let resumoTexto = '';
Â  Â  Â  Â  let totalPedido = 0;

Â  Â  Â  Â  if (pedidos.length === 0) {
Â  Â  Â  Â  Â  Â  resumoPedidoDiv.textContent = 'Nenhum pedido encontrado. Voltando ao menu...';
Â  Â  Â  Â  Â  Â  totalAPagarDiv.textContent = 'TOTAL: R$0,00';
Â  Â  Â  Â  Â  Â  handlePageTransition('index.html');
Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }

Â  Â  Â  Â  // GERAÃ‡ÃƒO DE HTML E ESTRUTURA PARA FORMATAR NO NAVEGADOR
Â  Â  Â  Â  resumoTexto += pedidos.map((item, index) => {
Â  Â  Â  Â  Â  Â  const totalItem = item.total;Â 
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Inicia o container do item (que serÃ¡ separado pelo CSS)
Â  Â  Â  Â  Â  Â  let linha = `<div class="resumo-item">`;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // TÃ­tulo: 1x Salada #N (Tamanho)
Â  Â  Â  Â  Â  Â  linha += `<strong>1x Salada #${index + 1} (${item.tamanho.nome}):</strong> `;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  let detalhes = [];

Â  Â  Â  Â  Â  Â  // Frutas (Checa se o array existe e se tem conteÃºdo)
Â  Â  Â  Â  Â  Â  if (item.fruits && item.fruits.length) detalhes.push(`Frutas: ${item.fruits.map(f => f.nome).join(', ')}`);
Â  Â  Â  Â  Â  Â  // Adicionais (Checa se o array existe e se tem conteÃºdo)
Â  Â  Â  Â  Â  Â  if (item.extras && item.extras.length) detalhes.push(`<span class="detail-label">Adic:</span> ${item.extras.map(e => e.nome).join(', ')}`);
Â  Â  Â  Â  Â  Â  // Acompanhamentos (Checa se o array existe e se tem conteÃºdo)
Â  Â  Â  Â  Â  Â  if (item.acomp && item.acomp.length) detalhes.push(`<span class="detail-label">Acomp:</span> ${item.acomp.map(a => a.nome).join(', ')}`);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // ObservaÃ§Ã£o (Checa se existe) - âœ… CORRIGIDO: Checa por 'observacoes' e 'obs'
Â  Â  Â  Â  Â  Â  const obs = item.observacoes || item.obs;
Â  Â  Â  Â  Â  Â  if (obs) detalhes.push(`<span class="detail-label">Obs:</span> ${obs}`);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Junta os detalhes usando o separador com classe CSS
Â  Â  Â  Â  Â  Â  linha += detalhes.join(' <span class="separator">|</span> ');
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // PreÃ§o total do item
Â  Â  Â  Â  Â  Â  linha += ` - <strong class="item-price">${formatCurrency(totalItem)}</strong>`;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Fecha o container do item
Â  Â  Â  Â  Â  Â  linha += `</div>`;Â 

Â  Â  Â  Â  Â  Â  totalPedido += totalItem;
Â  Â  Â  Â  Â  Â  return linha;
Â  Â  Â  Â  }).join(''); // NÃ£o usa separador no join, pois o <div> jÃ¡ cria a separaÃ§Ã£o

Â  Â  Â  Â  resumoPedidoDiv.innerHTML = resumoTexto; // Usa innerHTML para renderizar o HTML
Â  Â  Â  Â  totalAPagarDiv.textContent = 'TOTAL: ' + formatCurrency(totalPedido);

Â  Â  Â  Â  // 5. LISTENERS
Â  Â  Â  Â  document.getElementById('enviarPedido').addEventListener('click', () => {
Â  Â  Â  Â  Â  Â  Â // 5.1 Validar campos
Â  Â  Â  Â  Â  Â  if (nameInput.value.trim() === '') {
Â  Â  Â  Â  Â  Â  Â  Â  alert('Por favor, preencha seu nome.');
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â // 5.2 Salvar Nome
Â  Â  Â  Â  Â  Â  localStorage.setItem('tropicanaName', nameInput.value.trim());

Â  Â  Â  Â  Â  Â  const totalPedido = calcularTotalGeral();
Â  Â  Â  Â  Â  Â  // 5.3 Gera o texto para o WhatsApp com a nova formataÃ§Ã£o
Â  Â  Â  Â  Â  Â  let whatsappText = getWhatsappText(totalPedido);

Â  Â  Â  Â  Â  Â  // âœ… NOVO: Adiciona o selo de fidelidade ao finalizar o pedido
Â  Â  Â  Â  Â  Â  addFidelidadeSelo(); 

Â  Â  Â  Â  Â  Â  // âœ… REMOÃ‡ÃƒO DE EMOJIS (Para evitar caracteres estranhos na URL)
Â  Â  Â  Â  Â  Â  whatsappText = whatsappText.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|\uD83E[\uDC00-\uDFFF]|\u200D|\uFE0F/g, '');


Â  Â  Â  Â  Â  Â  // 5.4 Salva a mensagem no storage e redireciona para a tela de sucesso
Â  Â  Â  Â  Â  Â  localStorage.setItem('pedidoWhatsApp', whatsappText);

Â  Â  Â  Â  Â  Â  // 5.5 Limpa o localStorage de pedido (VOLTA Ã€ ESTACA ZERO)
Â  Â  Â  Â  Â  Â  localStorage.removeItem('tropicanaPedidos');
Â  Â  Â  Â  Â  Â  localStorage.removeItem('tropicanaName');
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // 5.6 Redireciona para a tela de sucesso
Â  Â  Â  Â  Â  Â  handlePageTransition('sucesso.html');Â 
Â  Â  Â  Â  });

Â  Â  Â  Â  // Listener para o botÃ£o de Voltar
Â  Â  Â  Â  document.getElementById('voltarMenu').addEventListener('click', () => {
Â  Â  Â  Â  Â  Â  Â // Salva o nome antes de voltar
Â  Â  Â  Â  Â  Â  Â localStorage.setItem('tropicanaName', nameInput.value.trim());
Â  Â  Â  Â  Â  Â  Â handlePageTransition('index.html');
Â  Â  Â  Â  });
Â  Â  Â  Â Â 
Â  Â  Â  Â  // Listener para persistir nome no localStorage
Â  Â  Â  Â  nameInput.addEventListener('input', () => localStorage.setItem('tropicanaName', nameInput.value.trim()));

        // ======================================================
        // INÃCIO: LÃ“GICA DE EXIBIÃ‡ÃƒO DO CARTÃƒO FIDELIDADE
        // ======================================================
        const selosAtuais = getFidelidadeSelos();
        const container = document.getElementById('selosContainer');
        const statusText = document.getElementById('selosStatus');
        const btnResgate = document.getElementById('btnResgate');

        if (container) { 
            // 1. Atualiza o status
            statusText.innerHTML = `VocÃª tem <strong>${selosAtuais}</strong> selos de ${MAX_SEALS}.`;

            // 2. Desenha os selos
            for (let i = 1; i <= MAX_SEALS; i++) {
                const seloDiv = document.createElement('div');
                seloDiv.className = 'selo';
                if (i <= selosAtuais) {
                    seloDiv.classList.add('earned');
                    seloDiv.textContent = 'âœ“';
                } else {
                    seloDiv.textContent = i;
                }
                container.appendChild(seloDiv);
            }

            // 3. LÃ³gica do botÃ£o de resgate
            if (selosAtuais >= MAX_SEALS) {
                btnResgate.disabled = false;
                btnResgate.classList.add('btn-whatsapp'); 
                btnResgate.textContent = 'ğŸ‰ RESGATE SEU PRÃŠMIO GRÃTIS AGORA! ğŸ‰';
                
                btnResgate.addEventListener('click', function() {
                    if (confirm('Ao resgatar, seus selos serÃ£o zerados e uma mensagem serÃ¡ enviada ao WhatsApp. Deseja continuar?')) {
                        // Gera um cÃ³digo simples para verificaÃ§Ã£o manual
                        const codigoResgate = 'DT' + Math.floor(Date.now() / 1000); 
                        const mensagem = `OlÃ¡! Quero resgatar minha Salada de Frutas GRÃTIS do CartÃ£o Fidelidade. Meu cÃ³digo de resgate Ã©: ${codigoResgate}`;
                        const urlWhatsApp = `https://wa.me/${phone}?text=${encodeURIComponent(mensagem)}`;
                        
                        // Zera os selos no LocalStorage
                        resetFidelidadeSelos();

                        // Abre o WhatsApp
                        window.open(urlWhatsApp, '_blank');
                        
                        // Redireciona de volta ao menu apÃ³s o resgate
                        setTimeout(() => {
                           handlePageTransition('index.html');
                        }, 1000);
                    }
                });
            }
        }
        // ======================================================
        // FIM: LÃ“GICA DE EXIBIÃ‡ÃƒO DO CARTÃƒO FIDELIDADE
        // ======================================================
    }

Â  Â  document.addEventListener('DOMContentLoaded', function() {
Â  Â  Â  Â  document.body.classList.add('loaded');
Â  Â  Â  Â  loadAndDisplayOrder();
Â  Â  });
Â  </script>
</body>
</html>
